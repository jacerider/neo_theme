{"version":3,"file":"neo-back.js","sources":["../../src/js/neo-back.ts"],"sourcesContent":["\n((Drupal, displace, debounce, once) => {\n\n  let top = -1;\n  let observer:IntersectionObserver;\n  const observeHeader = (element:HTMLElement) => {\n    if (top !== displace?.offsets.top) {\n      top = displace?.offsets.top ?? 0;\n      if (observer) {\n        observer.unobserve(element);\n      }\n      observer = new IntersectionObserver(entries => {\n        entries.forEach(e => {\n          e.target.classList.toggle('is-active', e.intersectionRatio < 1);\n        });\n      }, {\n        rootMargin: '-' + (top + 1) + 'px 0px 0px 0px',\n        threshold: [1],\n      });\n      observer.observe(element);\n    }\n  };\n\n  Drupal.behaviors.neoBack = {\n    attach: function (context:HTMLElement) {\n      const elements = once('region--header', '.region--header', context);\n      if (elements && displace) {\n        displace(false);\n        observeHeader(elements[0]);\n        window.addEventListener('resize', debounce(observeHeader, 205) as any);\n      }\n    }\n  };\n\n})(Drupal, Drupal.displace, Drupal.debounce, once);\n\nexport { };\n"],"names":["Drupal","displace","debounce","once","top","observer","observeHeader","element","entries","e","context","elements"],"mappings":"CACC,CAACA,GAAQC,GAAUC,GAAUC,MAAS;AAErC,MAAIC,IAAM,IACNC;AACE,QAAAC,IAAgB,CAACC,MAAwB;AACzC,IAAAH,OAAQH,KAAA,gBAAAA,EAAU,QAAQ,SACtBG,KAAAH,KAAA,gBAAAA,EAAU,QAAQ,QAAO,GAC3BI,KACFA,EAAS,UAAUE,CAAO,GAEjBF,IAAA,IAAI,qBAAqB,CAAWG,MAAA;AAC7C,MAAAA,EAAQ,QAAQ,CAAKC,MAAA;AACnB,QAAAA,EAAE,OAAO,UAAU,OAAO,aAAaA,EAAE,oBAAoB,CAAC;AAAA,MAAA,CAC/D;AAAA,IAAA,GACA;AAAA,MACD,YAAY,OAAOL,IAAM,KAAK;AAAA,MAC9B,WAAW,CAAC,CAAC;AAAA,IAAA,CACd,GACDC,EAAS,QAAQE,CAAO;AAAA,EAC1B;AAGFP,EAAAA,EAAO,UAAU,UAAU;AAAA,IACzB,QAAQ,SAAUU,GAAqB;AACrC,YAAMC,IAAWR,EAAK,kBAAkB,mBAAmBO,CAAO;AAClE,MAAIC,KAAYV,MACdA,EAAS,EAAK,GACAK,EAAAK,EAAS,CAAC,CAAC,GACzB,OAAO,iBAAiB,UAAUT,EAASI,GAAe,GAAG,CAAQ;AAAA,IAEzE;AAAA,EAAA;AAGJ,GAAG,QAAQ,OAAO,UAAU,OAAO,UAAU,IAAI;"}